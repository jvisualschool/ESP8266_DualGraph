<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ESP8266 Dual Display Monitor - Preview</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #0a0a0a;
    color: #fff;
    font-family: 'Courier New', monospace;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
  }

  h1 {
    font-size: 1.4rem;
    color: #888;
    margin-bottom: 8px;
    font-weight: 400;
    letter-spacing: 2px;
  }

  .subtitle {
    color: #555;
    font-size: 0.85rem;
    margin-bottom: 40px;
  }

  .mode-tabs {
    display: flex;
    gap: 0;
    margin-bottom: 30px;
  }

  .mode-tab {
    padding: 10px 28px;
    background: #111;
    border: 1px solid #333;
    color: #666;
    cursor: pointer;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    transition: all 0.3s;
  }

  .mode-tab:first-child { border-radius: 6px 0 0 6px; }
  .mode-tab:last-child { border-radius: 0 6px 6px 0; }

  .mode-tab.active {
    background: #1a1a2e;
    border-color: #07e0;
    color: #07e0;
  }

  .mode-tab.active-sys {
    background: #1a1a1a;
    border-color: #fbe0;
    color: #fbe0;
  }

  .displays {
    display: flex;
    gap: 40px;
    align-items: flex-start;
    flex-wrap: wrap;
    justify-content: center;
  }

  .display-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }

  .display-label {
    color: #555;
    font-size: 0.75rem;
    letter-spacing: 1px;
  }

  /* TFT 240x240 */
  .tft-frame {
    width: 280px;
    height: 280px;
    background: #000;
    border: 3px solid #222;
    border-radius: 8px;
    padding: 20px;
    position: relative;
    box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 20px rgba(0,0,0,0.5);
  }

  .tft-screen {
    width: 240px;
    height: 240px;
    background: #000;
    position: relative;
    overflow: hidden;
    image-rendering: pixelated;
  }

  /* OLED 128x64 */
  .oled-frame {
    width: 200px;
    height: 120px;
    background: #000;
    border: 3px solid #1a1a1a;
    border-radius: 6px;
    padding: 12px 36px;
    box-shadow: 0 0 20px rgba(0,0,0,0.8), inset 0 0 10px rgba(0,0,0,0.5);
  }

  .oled-screen {
    width: 128px;
    height: 64px;
    background: #000;
    position: relative;
    overflow: hidden;
  }

  /* ===== TFT Weather Mode ===== */
  .tft-weather .title-bar {
    background: #00003c;
    padding: 5px 8px;
    margin: -0px -0px 0 -0px;
  }

  .tft-weather .title-bar span {
    color: #00ffff;
    font-size: 14px;
    font-weight: bold;
  }

  .tft-weather .weather-symbol {
    color: #ffff00;
    font-size: 14px;
    margin: 10px 0 4px 8px;
  }

  .tft-weather .temp {
    color: #fff;
    font-size: 36px;
    font-weight: bold;
    margin: 2px 0 2px 8px;
    line-height: 1;
  }

  .tft-weather .temp .unit {
    font-size: 16px;
    vertical-align: top;
  }

  .tft-weather .desc {
    color: #bbb;
    font-size: 14px;
    margin: 6px 0 8px 8px;
  }

  .tft-weather .divider {
    border-top: 1px solid #333;
    margin: 4px 0;
  }

  .tft-weather .detail {
    display: flex;
    padding: 3px 8px;
    font-size: 14px;
  }

  .tft-weather .detail .label { width: 65px; }
  .tft-weather .detail .value { color: #fff; }

  .label-feel { color: #ffa500; }
  .label-hum { color: #00ffff; }
  .label-wind { color: #00ff00; }
  .label-hpa { color: #ff00ff; }

  /* ===== TFT System Mode ===== */
  .tft-system .title-bar {
    background: #222;
    padding: 6px 16px;
  }

  .tft-system .title-bar span {
    color: #fff;
    font-size: 14px;
    font-weight: bold;
  }

  .tft-system .info-row {
    display: flex;
    padding: 6px 8px;
    font-size: 14px;
  }

  .tft-system .info-row .label { width: 55px; }
  .tft-system .info-row .value { color: #fff; }

  .label-id { color: #86dfff; }
  .label-cpu { color: #ffff00; }
  .label-rom { color: #ffb800; }
  .label-heap { color: #00ff00; }
  .label-wifi { color: #86dfff; }
  .label-up { color: #ffb800; }

  .tft-system .sys-divider {
    border-top: 1px solid #1a1a1a;
    margin: 4px 8px;
  }

  .gauge-container {
    margin: 4px 8px 2px 8px;
  }

  .gauge-bar {
    width: 200px;
    height: 16px;
    background: #1a1a1a;
    border: 1px solid #fff;
    border-radius: 2px;
    overflow: hidden;
  }

  .gauge-fill {
    height: 100%;
    transition: width 1s;
  }

  .gauge-fill-green { background: #00ff00; }
  .gauge-fill-cyan { background: #86dfff; }
  .gauge-fill-yellow { background: #ffff00; }

  .gauge-text {
    color: #fff;
    font-size: 14px;
    margin: 2px 0 4px 8px;
  }

  /* ===== OLED Styles ===== */
  .oled-screen * {
    color: #cde6ff;
    font-size: 8px;
    line-height: 1.4;
  }

  .oled-screen .time-big {
    font-size: 16px;
    text-align: center;
    letter-spacing: 2px;
    margin-bottom: 1px;
  }

  .oled-screen .date-line {
    font-size: 8px;
    text-align: center;
    margin-bottom: 3px;
  }

  .oled-screen .oled-divider {
    border-top: 1px solid #cde6ff;
    margin: 2px 0;
  }

  .oled-screen .oled-row {
    padding: 1px 0;
    font-size: 8px;
  }

  /* ===== Timer ===== */
  .timer-bar {
    width: 400px;
    max-width: 90vw;
    margin-top: 30px;
    text-align: center;
  }

  .timer-track {
    width: 100%;
    height: 4px;
    background: #1a1a1a;
    border-radius: 2px;
    overflow: hidden;
    margin-top: 8px;
  }

  .timer-fill {
    height: 100%;
    background: linear-gradient(90deg, #00ffff, #07e0);
    transition: width 0.1s linear;
    border-radius: 2px;
  }

  .timer-text {
    color: #555;
    font-size: 0.75rem;
    margin-top: 6px;
  }

  .hardware-info {
    margin-top: 40px;
    display: flex;
    gap: 30px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .hw-card {
    background: #111;
    border: 1px solid #222;
    border-radius: 8px;
    padding: 16px 20px;
    min-width: 200px;
  }

  .hw-card h3 {
    color: #666;
    font-size: 0.7rem;
    letter-spacing: 1px;
    margin-bottom: 8px;
  }

  .hw-card .hw-row {
    display: flex;
    justify-content: space-between;
    padding: 2px 0;
    font-size: 0.8rem;
  }

  .hw-card .hw-row .hw-label { color: #777; }
  .hw-card .hw-row .hw-value { color: #aaa; }

  .hidden { display: none; }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }
  .live-dot {
    display: inline-block;
    width: 6px;
    height: 6px;
    background: #0f0;
    border-radius: 50%;
    animation: pulse 2s infinite;
    margin-right: 6px;
  }
</style>
</head>
<body>

<h1>ESP8266 DUAL DISPLAY MONITOR</h1>
<p class="subtitle">NodeMCU v2 + SSD1306 OLED + ST7789 TFT</p>

<div class="mode-tabs">
  <div class="mode-tab active" id="tab-weather" onclick="switchMode('weather')">
    <span class="live-dot"></span>WEATHER
  </div>
  <div class="mode-tab" id="tab-system" onclick="switchMode('system')">
    <span class="live-dot" style="background:#ffb800"></span>SYSTEM
  </div>
</div>

<div class="displays">

  <!-- TFT Display -->
  <div class="display-group">
    <div class="display-label">ST7789 TFT 240x240</div>
    <div class="tft-frame">
      <div class="tft-screen">

        <!-- Weather Mode -->
        <div class="tft-weather" id="tft-weather">
          <div class="title-bar"><span>Seoul Weather</span></div>
          <div class="weather-symbol" id="weather-symbol">Cloud</div>
          <div class="temp" id="weather-temp">-0.2<span class="unit">'C</span></div>
          <div class="desc" id="weather-desc">overcast clouds</div>
          <div class="divider"></div>
          <div class="detail"><span class="label label-feel">Feel</span><span class="value" id="w-feel">-3.1'C</span></div>
          <div class="detail"><span class="label label-hum">Hum</span><span class="value" id="w-hum">72%</span></div>
          <div class="detail"><span class="label label-wind">Wind</span><span class="value" id="w-wind">2.3m/s</span></div>
          <div class="detail"><span class="label label-hpa">hPa</span><span class="value" id="w-hpa">1025</span></div>
        </div>

        <!-- System Mode -->
        <div class="tft-system hidden" id="tft-system">
          <div class="title-bar"><span>ESP8266 Info</span></div>
          <div class="info-row"><span class="label label-id">ID</span><span class="value">86B1C7</span></div>
          <div class="info-row"><span class="label label-cpu">CPU</span><span class="value">80 MHz</span></div>
          <div class="info-row"><span class="label label-rom">ROM</span><span class="value">4096 KB</span></div>
          <div class="sys-divider"></div>
          <div class="info-row"><span class="label label-heap">HEAP</span><span class="value" id="sys-heap-text">38KB</span></div>
          <div class="gauge-container">
            <div class="gauge-bar"><div class="gauge-fill gauge-fill-green" id="heap-gauge" style="width:54%"></div></div>
          </div>
          <div class="gauge-text" id="heap-percent">54% used</div>
          <div class="info-row"><span class="label label-wifi">WiFi</span><span class="value" id="sys-rssi">-42dBm</span></div>
          <div class="gauge-container">
            <div class="gauge-bar"><div class="gauge-fill gauge-fill-cyan" id="wifi-gauge" style="width:76%"></div></div>
          </div>
          <div class="info-row" style="margin-top:4px"><span class="label label-up">UP</span><span class="value" id="sys-uptime">2h 15m 30s</span></div>
        </div>

      </div>
    </div>
  </div>

  <!-- OLED Display -->
  <div class="display-group">
    <div class="display-label">SSD1306 OLED 128x64</div>
    <div class="oled-frame">
      <div class="oled-screen">

        <!-- Weather OLED -->
        <div id="oled-weather">
          <div class="time-big" id="oled-time">15:42:30</div>
          <div class="date-line" id="oled-date">2026-02-16</div>
          <div class="oled-divider"></div>
          <div class="oled-row">WiFi: -42dBm</div>
          <div class="oled-row">IP:192.168.0.111</div>
          <div class="oled-row" id="oled-upd">Upd: 125s ago</div>
        </div>

        <!-- System OLED -->
        <div id="oled-system" class="hidden">
          <div class="oled-row">SSID:MY_WIFI</div>
          <div class="oled-row">IP: 192.168.0.111</div>
          <div class="oled-row">MAC:48:3F:DA:86:B1:C7</div>
          <div class="oled-divider"></div>
          <div class="oled-row" id="oled-heap">Heap: 38KB free</div>
          <div class="oled-row" id="oled-up">Up: 2h 15m 30s</div>
        </div>

      </div>
    </div>
  </div>

</div>

<!-- Timer -->
<div class="timer-bar">
  <div class="timer-track">
    <div class="timer-fill" id="timer-fill" style="width:0%"></div>
  </div>
  <div class="timer-text" id="timer-text">30s auto rotation</div>
</div>

<!-- Hardware Info -->
<div class="hardware-info">
  <div class="hw-card">
    <h3>MCU</h3>
    <div class="hw-row"><span class="hw-label">Chip</span><span class="hw-value">ESP8266EX</span></div>
    <div class="hw-row"><span class="hw-label">Board</span><span class="hw-value">NodeMCU v2</span></div>
    <div class="hw-row"><span class="hw-label">CPU</span><span class="hw-value">80MHz</span></div>
    <div class="hw-row"><span class="hw-label">RAM</span><span class="hw-value">80KB</span></div>
    <div class="hw-row"><span class="hw-label">Flash</span><span class="hw-value">4MB</span></div>
  </div>
  <div class="hw-card">
    <h3>DISPLAYS</h3>
    <div class="hw-row"><span class="hw-label">TFT</span><span class="hw-value">ST7789 240x240</span></div>
    <div class="hw-row"><span class="hw-label">TFT SPI</span><span class="hw-value">SW (D1,D2,D3,D4,D8)</span></div>
    <div class="hw-row"><span class="hw-label">OLED</span><span class="hw-value">SSD1306 128x64</span></div>
    <div class="hw-row"><span class="hw-label">OLED I2C</span><span class="hw-value">D5,D6 (0x3C)</span></div>
  </div>
  <div class="hw-card">
    <h3>CONNECTIONS</h3>
    <div class="hw-row"><span class="hw-label">WiFi</span><span class="hw-value">config.h</span></div>
    <div class="hw-row"><span class="hw-label">API</span><span class="hw-value">OpenWeatherMap</span></div>
    <div class="hw-row"><span class="hw-label">NTP</span><span class="hw-value">pool.ntp.org</span></div>
    <div class="hw-row"><span class="hw-label">Power</span><span class="hw-value">USB-C (5V)</span></div>
  </div>
</div>

<script>
let currentMode = 'weather';
let timerStart = Date.now();
const INTERVAL = 30000;

function switchMode(mode) {
  currentMode = mode;
  timerStart = Date.now();

  document.getElementById('tft-weather').classList.toggle('hidden', mode !== 'weather');
  document.getElementById('tft-system').classList.toggle('hidden', mode !== 'system');
  document.getElementById('oled-weather').classList.toggle('hidden', mode !== 'weather');
  document.getElementById('oled-system').classList.toggle('hidden', mode !== 'system');

  document.getElementById('tab-weather').className = mode === 'weather' ? 'mode-tab active' : 'mode-tab';
  document.getElementById('tab-system').className = mode === 'system' ? 'mode-tab active-sys' : 'mode-tab';
}

function updateClock() {
  const now = new Date();
  const time = now.toTimeString().slice(0, 8);
  const date = now.toISOString().slice(0, 10);
  document.getElementById('oled-time').textContent = time;
  document.getElementById('oled-date').textContent = date;
}

function updateTimer() {
  const elapsed = Date.now() - timerStart;
  const percent = Math.min((elapsed / INTERVAL) * 100, 100);
  document.getElementById('timer-fill').style.width = percent + '%';

  const remaining = Math.max(0, Math.ceil((INTERVAL - elapsed) / 1000));
  document.getElementById('timer-text').textContent =
    currentMode.toUpperCase() + ' mode - ' + remaining + 's';

  if (elapsed >= INTERVAL) {
    switchMode(currentMode === 'weather' ? 'system' : 'weather');
  }
}

function simulateData() {
  // Randomize heap
  const heap = 35 + Math.floor(Math.random() * 10);
  const heapPercent = Math.round((81920 - heap * 1024) / 81920 * 100);
  document.getElementById('sys-heap-text').textContent = heap + 'KB';
  document.getElementById('heap-percent').textContent = heapPercent + '% used';
  document.getElementById('heap-gauge').style.width = heapPercent + '%';
  document.getElementById('oled-heap').textContent = 'Heap: ' + heap + 'KB free';

  // Randomize WiFi
  const rssi = -35 - Math.floor(Math.random() * 20);
  const wifiPercent = Math.min(Math.max(2 * (rssi + 100), 0), 100);
  document.getElementById('sys-rssi').textContent = rssi + 'dBm';
  document.getElementById('wifi-gauge').style.width = wifiPercent + '%';

  // Uptime
  const sec = Math.floor((Date.now() % 86400000) / 1000);
  const h = Math.floor(sec / 3600);
  const m = Math.floor((sec % 3600) / 60);
  const s = sec % 60;
  const upStr = h + 'h ' + m + 'm ' + s + 's';
  document.getElementById('sys-uptime').textContent = upStr;
  document.getElementById('oled-up').textContent = 'Up: ' + upStr;
}

setInterval(updateClock, 1000);
setInterval(updateTimer, 100);
setInterval(simulateData, 3000);

updateClock();
simulateData();
</script>

</body>
</html>
